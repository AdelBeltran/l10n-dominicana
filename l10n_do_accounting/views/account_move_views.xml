<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="view_move_form" model="ir.ui.view">
        <field name="name">account.move.form</field>
        <field name="model">account.move</field>
        <field name="inherit_id" ref="account.view_move_form"/>
        <field name="arch" type="xml">

        <xpath expr="//form[1]/sheet[1]/group[1]/group[1]/field[@name='partner_id']" position="after">
            <xpath expr="//field[@name='l10n_latam_document_type_id']" position="move"/>
            <xpath expr="//field[@name='ref']" position="move"/>
            <field name="l10n_do_origin_ncf" attrs="{'invisible': [['type','not in',['out_refund','in_refund']]], 'required': ['&amp;',['type','=','out_refund'],['l10n_latam_use_documents','=',True]], 'readonly': [['state','!=','draft']]}"/>
        </xpath>
        <xpath expr="//field[@name='ref']" position="after">
            <field name="l10n_do_income_type" attrs="{'invisible': ['|',['l10n_latam_use_documents','=',False],['type','!=','out_invoice']], 'required': ['&amp;',['l10n_latam_use_documents','=',True],['type','=','out_invoice']], 'readonly': [['state','!=','draft']]}"/>
            <field name="l10n_do_expense_type" attrs="{'invisible': ['|',['l10n_latam_use_documents','=',False],['type','!=','in_invoice']], 'required': ['&amp;',['l10n_latam_use_documents','=',True],['type','=','in_invoice']], 'readonly': [['state','!=','draft']]}"/>
        </xpath>
        <xpath expr="//field[@name='ref']" position="attributes">
            <attribute name="attrs">{"invisible": ["|",["l10n_latam_use_documents","=",False],"&amp;","&amp;","&amp;",["ref","=",False],["state","=","draft"],["type","=","out_invoice"],["type","=","out_refund"]], "readonly": ["|",["state","!=","draft"],["type","in",["out_invoice","out_refund"]]], "required": [["l10n_latam_sequence_id","=",False],["l10n_latam_use_documents","=",True]]}</attribute>
        </xpath>

        </field>
    </record>
</odoo>
